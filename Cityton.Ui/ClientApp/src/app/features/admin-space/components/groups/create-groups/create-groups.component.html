<section *ngIf="(resultSRequests$ | async) as resultSRequests">

  <h1> Create a group </h1>

  <mat-form-field>
    <input matInput type="text" placeholder="Name" [(ngModel)]="name" #groupName>
    <mat-hint> At least 3 characters </mat-hint>
  </mat-form-field>

  <!-- ******************************************************** -->

  <mat-selection-list class="listUsers" #listUser
    (selectionChange)="selectMembers(listUser.selectedOptions.selected)">
    <mat-list-option *ngFor="let user of resultSRequests[0]" [value]="user"
      [disabled]="usersSelected.length >= resultSRequests[1].maxGroupSize && !usersSelectedContains(user.id)">
      {{user.username}}
    </mat-list-option>
  </mat-selection-list>

  <!-- ******************************************************** -->

  <ng-container *ngIf="usersSelected != undefined && usersSelected.length > 0">
    <h2> Select a creator </h2>
    <mat-selection-list class="listUsers" #listMember
      (selectionChange)="selectCreator(listMember.selectedOptions.selected)">
      <mat-list-option *ngFor="let user of usersSelected" [value]="user"
        [disabled]="creatorSelected != null && user.id != creatorSelected.id">
        {{user.username}}
      </mat-list-option>
    </mat-selection-list>
  </ng-container>

  <!-- ******************************************************** -->

  <mat-card>

    <mat-card-header>
      <mat-card-title> {{groupName.value}} </mat-card-title>
    </mat-card-header>

    <mat-card-content>

      <div *ngFor="let member of usersSelected" class="username">
        {{ member.username }}
      </div>

    </mat-card-content>

  </mat-card>

  <br>

  <button mat-raised-button color="accent" type="button" (click)="submit()"
    [disabled]="!(isGroupValidate(resultSRequests[1].minGroupSize, resultSRequests[1].maxGroupSize))"> Submit </button>
  <button mat-raised-button color="accent" type="button" (click)="cancel()"> Cancel </button>

</section>
