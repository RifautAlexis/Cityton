<section *ngIf="(resultSRequests$ | async) as resultSRequests">

  <h1> Create a group </h1>

  <mat-form-field>
    <input matInput type="text" placeholder="Name" [(ngModel)]="name" #groupName>
    <mat-hint> At least 3 characters </mat-hint>
  </mat-form-field>

  <!-- ******************************************************** -->

  <mat-selection-list class="listUsers" #listUser [(ngModel)]="selectedUsers">
    <mat-list-option *ngFor="let user of usersWithoutGroup" [value]="user"
      [disabled]="selectedUsers.length >= resultSRequests[1].maxGroupSize && !usersSelectedContains(user.id)">
      {{user.username}}
    </mat-list-option>
  </mat-selection-list>

  <!-- ******************************************************** -->

  <ng-container *ngIf="selectedUsers != undefined && selectedUsers.length > 0">
    <h2> Select a creator </h2>
    <mat-selection-list class="listUsers" #listMember [(ngModel)]="selectedCreator">
      <mat-list-option *ngFor="let user of selectedUsers" [value]="user"
        [disabled]="isMember || (selectedCreator[0] != null && user.id != selectedCreator[0].id)">
        {{user.username}}
      </mat-list-option>
    </mat-selection-list>
  </ng-container>

  <!-- ******************************************************** -->

  <mat-card>

    <mat-card-header>
      <mat-card-title> {{groupName.value}} </mat-card-title>
    </mat-card-header>

    <mat-card-content>

      <div *ngFor="let member of selectedUsers" class="username">
        {{ member.username }}
      </div>

    </mat-card-content>

  </mat-card>

  <br>

  <button mat-raised-button color="accent" type="button" (click)="submit()"
    [disabled]="!(isGroupValidate(resultSRequests[1].minGroupSize, resultSRequests[1].maxGroupSize))"> Submit </button>
  <button mat-raised-button color="accent" type="button" (click)="cancel()"> Cancel </button>

</section>
